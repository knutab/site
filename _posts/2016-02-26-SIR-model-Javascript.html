---
layout: defaultproject
title: Implementing The SIR Epidemic model in Javascript
meta: Implementing and solving the SIR Disease Difference Equation model in Javascripte in the browser window
categories: project
---




<br>
<br>
<h1> SIR Epidemic model implemented in Javascript</h1>
<br>
<p> All the formulas used here is the same ones that is used in the <a href="{{site.baseurl}}/project/2015/11/25/SIR-model.html">Implementing The SIR Epidemic model in Python</a> project. The graph is created based on the values shown in the input boxes. Change the values and Calculate to see the result. In this example I have used dt = 0.5, this is large, and one should therefor expect some exceptional wrong results for some combinations of inputs. This will always be a concern when using numerical methods.  </p>
<br>
<br>
<div>
<form id="sirform">
	<div>
		<fieldset id="sirleft">
			<br>
			<br>
			<label>
				<span>Susceptible</span><input id="S" type="text"  value="1500"/>
			</label>
			<br>
			<br>
			<label>
				<span>Infected</span><input id="I"  type="text" value="1"/>
			</label>
			<br>
			<br>
			<label>
				<span>Resistant</span><input id="R" type="text"  value="0"/>
			</label>
			<br>
			<br>
		</fieldset>
		
		<fieldset id="sirright">
			<br>
			<br>
			<label>
				<span> Beta</span><input id="beta" type="text"  value="0.0005"/>
			</label>
			<br>
			<br>
			<label>
				<span> Gamma </span><input id="gamma" type="text" value="0.1"/>
			</label>
			<br>
			<br>
			<label>
				<span>Time (In Days)</span><input id="T" type="text" value="20"/>
			</label>
			<br>
			<br>
		</fieldset>

		<label>
        	<input id="b1" type="button" value="Calculate"/>
    </label>
    <br>
    <div>
        <div id="chart" ></div>
    </div>
</form>
</center>
</div>

<script>
        
google.charts.load('current', {'packages':['corechart']});
google.charts.setOnLoadCallback(drawChart);
    
    function drawChart() {
        
        //Create the data used
        
        var days_initial = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20];
        var Susceptible_initial = [1499, 1498, 1496, 1493, 1487, 1478, 1463, 1439, 1401, 1340, 1247, 1111, 927, 703, 472, 277, 147, 76, 40, 22];
        var Infected_initial = [2, 3, 4, 7, 12, 20, 33, 54, 87, 139, 218, 332, 483, 659, 824, 936, 972, 947, 888, 817];
        var Removed_initial = [0, 0, 1, 1, 2, 3, 5, 8, 14, 22, 36, 58, 91, 139, 205, 288, 381, 479, 573, 662];
        
        
        var options = {
          
          width:800, 
          height:500,
          backgroundColor: '#E5E4E2',
          chartArea:{left:50,top:30,width:'90%',height:'85%'},
          legend: {position: 'top' },
          animation: {duration: 1000, easing: 'out'},
          hAxis: {title: 'Days'},
        
      };
        // Create and populate the data table.
        var data = new google.visualization.DataTable();    
        data.addColumn('number', 'Days');
        data.addColumn('number', 'Susceptible');
        data.addColumn('number', 'Infected');
        data.addColumn('number', 'Resistant');
        
        for(var i=0; i < days_initial.length; i++){
            var row = [days_initial[i], Susceptible_initial[i], Infected_initial[i], Removed_initial[i]];
            data.addRow(row);
            };

        // Create and draw the visualization.
        var chart = new google.visualization.LineChart(document.getElementById('chart'));
        chart.draw(data, options);
        

          var button = document.getElementById('b1');
          button.onclick = function() {
              
              // Gets the input parameters from a from on the site
              var S = parseFloat(document.getElementById('S').value);
              var I = parseFloat(document.getElementById('I').value);
              var R = parseFloat(document.getElementById('R').value);
              var gamma = parseFloat(document.getElementById('gamma').value);
              var beta = parseFloat(document.getElementById('beta').value);
              var T = parseFloat(document.getElementById('T').value);

              var holder = SIR(S, I, R, gamma, beta, T);
              var Days = holder[3];
              var Susceptible = holder[0];
              var Infected = holder[1];
              var Removed = holder[2];

              var data = new google.visualization.DataTable();    
              data.addColumn('number', 'Days');
              data.addColumn('number', 'Susceptible');
              data.addColumn('number', 'Infected');
              data.addColumn('number', 'Removed');


              for(var i=0; i < Days.length; i++){
                  var row = [Days[i], Susceptible[i], Infected[i], Removed[i]];
                  data.addRow(row);
                  };
            chart.draw(data, options);
          };

        }

google.load("visualization", "1", {packages:["corechart"]});
google.setOnLoadCallback(drawChart);      
</script>
<br>
<br>
<p> Here is the code for the SIR model in Javascript.
<br>
<br>
<div class="code-wrapper">
<pre class="prettyprint linenums:">

function SIR(S, I ,R, gamma, beta, T){
    
    /* Arrays to hold rhe results */
    var susceptible = [], infected = [], removed = [], time = [], n, S_i, I_i, 
            R_i, dt, t;
    
    dt = 0.5;
    t = 0;
    n = T / dt;


    for (i=0; i < n; i++){
        
        S_i = S - dt * beta * S * I;
        I_i = I + dt * beta * S * I - dt * gamma * I;
        R_i = R + dt * gamma * I;
        t = t + dt;
        
        susceptible.push(S_i);
        infected.push(I_i);
        removed.push(R_i);
        time.push(t);
          
        S = S_i;
        I = I_i;
        R = R_i;
    }
    
    return [susceptible, infected, removed, time];
}   

</pre>
</div>
<br>
<br>
<p> Here is the additional code to create and update the graph.
<br>
<br>
<div class="code-wrapper">
<pre class="prettyprint linenums:"> 
        
google.charts.load('current', {'packages':['corechart']});
google.charts.setOnLoadCallback(drawChart);
    
    function drawChart() {
        
        //Create the data used
        
        var days_initial = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20];
        var Susceptible_initial = [1499, 1498, 1496, 1493, 1487, 1478, 1463, 1439, 1401, 1340, 1247, 1111, 
        927, 703, 472, 277, 147, 76, 40, 22];

        var Infected_initial = [2, 3, 4, 7, 12, 20, 33, 54, 87, 139, 218, 332, 483, 659, 824, 936,
         972, 947, 888, 817];
        var Removed_initial = [0, 0, 1, 1, 2, 3, 5, 8, 14, 22, 36, 58, 91, 139, 205, 288, 381, 479, 573, 662];
        
        
        var options = {
          
          width:800, 
          height:500,
          backgroundColor: '#E5E4E2',
          chartArea:{left:50,top:30,width:'90%',height:'85%'},
          legend: {position: 'top' },
          animation: {duration: 1000, easing: 'out'},
          hAxis: {title: 'Days'},
        
      };
        // Create and populate the data table.
        var data = new google.visualization.DataTable();    
        data.addColumn('number', 'Days');
        data.addColumn('number', 'Susceptible');
        data.addColumn('number', 'Infected');
        data.addColumn('number', 'Resistant');
        
        for(var i=0; i < days_initial.length; i++){
            var row = [days_initial[i], Susceptible_initial[i], Infected_initial[i], Removed_initial[i]];
            data.addRow(row);
            };

        // Create and draw the visualization.
        var chart = new google.visualization.LineChart(document.getElementById('chart'));
        chart.draw(data, options);
        

          var button = document.getElementById('b1');
          button.onclick = function() {
              
              // Gets the input parameters from a from on the site
              var S = parseFloat(document.getElementById('S').value);
              var I = parseFloat(document.getElementById('I').value);
              var R = parseFloat(document.getElementById('R').value);
              var gamma = parseFloat(document.getElementById('gamma').value);
              var beta = parseFloat(document.getElementById('beta').value);
              var T = parseFloat(document.getElementById('T').value);

              var holder = SIR(S, I, R, gamma, beta, T);
              var Days = holder[3];
              var Susceptible = holder[0];
              var Infected = holder[1];
              var Removed = holder[2];

              var data = new google.visualization.DataTable();    
              data.addColumn('number', 'Days');
              data.addColumn('number', 'Susceptible');
              data.addColumn('number', 'Infected');
              data.addColumn('number', 'Removed');


              for(var i=0; i < Days.length; i++){
                  var row = [Days[i], Susceptible[i], Infected[i], Removed[i]];
                  data.addRow(row);
                  };
            chart.draw(data, options);
          };

        }

google.load("visualization", "1", {packages:["corechart"]});
google.setOnLoadCallback(drawChart);      

</pre>
</div>
<br>
<br>
<script>
prettyPrint();
</script>











    

        
      